import{K as H,r as d,m as M,j as a,L as F,$ as b,S as I}from"./app-Dr_irZI3.js";import{A as O,D as _,j as z,k as R,l as U,m as u}from"./app-layout-CyydRRDz.js";import{C as Y,a as $,b as J,c as q,k as G,d as Q,T as V,e as W,f as j,g as p,h as X,i as c,B as Z,j as aa}from"./badge-B8oDEbg5.js";import{B as i}from"./button-CQ_-L00I.js";import{D as N,a as D,b as C,c as k,d as v,e as A}from"./dialog-DJaEgRGU.js";import{A as ea,a as sa,b as na,c as ra,d as ia,e as la,f as ta,g as oa}from"./alert-dialog-9OIjdsAq.js";import{L as T,I as y}from"./label-Bi83zlLt.js";import{C as da,E as ca,P as ma,T as ha,a as xa,b as ua,c as ja,d as pa}from"./pagination-BhLci8KO.js";import{E as ga}from"./eye-BVmBw2Ns.js";import"./index-B-eYaQ5t.js";import"./index-Bt1rmM6T.js";import"./index-BeJybh8w.js";import"./index-Cgp5GsVv.js";import"./app-logo-icon-CoRg52r3.js";function Ka(){const{kategoriList:n,errors:fa}=H().props,[S,l]=d.useState(!1),[s,t]=d.useState(null),[r,m]=d.useState(null),{data:g,setData:h,post:w,put:L,processing:f,errors:o,reset:x}=M({id:void 0,nama:""});d.useEffect(()=>{s?h({id:s.id,nama:s.nama}):x()},[s]);const B=e=>{e.preventDefault(),w(route("kategori.store"),{onSuccess:()=>{l(!1),x()}})},E=e=>{e.preventDefault(),console.log("CALLLLLEEDDDD"),s&&L(route("kategori.update",s.id),{onSuccess:()=>{t(null),x()}})},K=()=>{r&&I.delete(route("kategori.destroy",r.id),{onSuccess:()=>m(null)})};return a.jsxs(O,{children:[a.jsx(F,{title:"Daftar Kategori"}),a.jsx("main",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:a.jsxs(Y,{children:[a.jsxs($,{children:[a.jsx(J,{children:"Daftar Kategori"}),a.jsx(q,{children:"Kelola kategori untuk semua barang di gudang."}),a.jsx(G,{children:a.jsxs(i,{size:"sm",className:"gap-1",onClick:()=>l(!0),children:[a.jsx(da,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Tambah Kategori"})]})})]}),a.jsx(Q,{children:a.jsxs(V,{children:[a.jsx(W,{children:a.jsxs(j,{children:[a.jsx(p,{children:"Nama Kategori"}),a.jsx(p,{className:"text-center",children:"Jumlah Barang"}),a.jsx(p,{children:a.jsx("span",{className:"sr-only",children:"Aksi"})})]})}),a.jsx(X,{children:n.data.length>0?n.data.map(e=>a.jsxs(j,{children:[a.jsx(c,{className:"font-medium",children:a.jsx(b,{href:route("barang.index",{kategori:e.nama}),className:"hover:underline",children:e.nama})}),a.jsx(c,{className:"text-center",children:a.jsxs(Z,{variant:"secondary",children:[a.jsx("span",{className:"font-semibold",children:e.barang_count})," Barang"]})}),a.jsx(c,{className:"text-right",children:a.jsxs(_,{children:[a.jsx(z,{asChild:!0,children:a.jsxs(i,{"aria-haspopup":"true",size:"icon",variant:"ghost",children:[a.jsx(ca,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Toggle menu"})]})}),a.jsxs(R,{align:"end",children:[a.jsx(U,{children:"Aksi"}),a.jsx(u,{asChild:!0,children:a.jsxs(b,{href:route("barang.index",{kategori:e.nama}),children:[a.jsx(ga,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Lihat Barang"})]})}),a.jsxs(u,{onClick:()=>setTimeout(()=>t(e),50),children:[a.jsx(ma,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Ubah Nama"})]}),a.jsxs(u,{className:"text-red-600 focus:text-red-600 focus:bg-red-100",onClick:()=>setTimeout(()=>m(e),50),children:[a.jsx(ha,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"Hapus"})]})]})]})})]},e.id)):a.jsx(j,{children:a.jsx(c,{colSpan:3,className:"h-24 text-center",children:"Belum ada kategori."})})})]})}),a.jsxs(aa,{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Menampilkan ",a.jsxs("strong",{children:[n.from,"-",n.to]})," dari ",a.jsx("strong",{children:n.total})," kategori"]}),a.jsx(xa,{className:"ml-auto",children:a.jsx(ua,{children:n.links.map((e,P)=>a.jsx(ja,{children:a.jsx(pa,{href:e.url||"#",preserveScroll:!0,preserveState:!0,className:e.url?"":"pointer-events-none text-muted-foreground",children:a.jsx("span",{dangerouslySetInnerHTML:{__html:e.label}})})},P))})})]})]})}),a.jsx(N,{open:S,onOpenChange:l,children:a.jsx(D,{className:"sm:max-w-[425px]",children:a.jsxs("form",{onSubmit:B,children:[a.jsxs(C,{children:[a.jsx(k,{children:"Tambah Kategori Baru"}),a.jsx(v,{children:"Masukkan nama untuk kategori baru."})]}),a.jsx("div",{className:"grid gap-4 py-4",children:a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(T,{htmlFor:"nama",className:"text-right",children:"Nama"}),a.jsx(y,{id:"nama",value:g.nama,onChange:e=>h("nama",e.target.value),className:"col-span-3",autoFocus:!0}),o.nama&&a.jsx("p",{className:"col-span-4 text-sm text-red-500 text-right",children:o.nama})]})}),a.jsxs(A,{children:[a.jsx(i,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Batal"}),a.jsx(i,{type:"submit",disabled:f,children:"Simpan"})]})]})})}),a.jsx(N,{open:!!s,onOpenChange:()=>t(null),children:a.jsx(D,{className:"sm:max-w-[425px]",children:a.jsxs("form",{id:"edit-kategori-form",onSubmit:E,children:[a.jsxs(C,{children:[a.jsx(k,{children:"Ubah Nama Kategori"}),a.jsx(v,{children:"Perbarui nama untuk kategori yang dipilih."})]}),a.jsx("div",{className:"grid gap-4 py-4",children:a.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[a.jsx(T,{htmlFor:"edit-nama",className:"text-right",children:"Nama"}),a.jsx(y,{id:"edit-nama",value:g.nama,onChange:e=>h("nama",e.target.value),className:"col-span-3",autoFocus:!0}),o.nama&&a.jsx("p",{className:"col-span-4 text-sm text-red-500 text-right",children:o.nama})]})}),a.jsxs(A,{children:[a.jsx(i,{type:"button",variant:"outline",onClick:()=>t(null),children:"Batal"}),a.jsx(i,{type:"submit",form:"edit-kategori-form",disabled:f,children:"Simpan Perubahan"})]})]})})}),a.jsx(ea,{open:!!r,onOpenChange:()=>m(null),children:a.jsxs(sa,{children:[a.jsxs(na,{children:[a.jsx(ra,{children:"Apakah Anda Yakin?"}),a.jsxs(ia,{children:["Tindakan ini tidak dapat dibatalkan. Ini akan menghapus kategori",a.jsxs("span",{className:"font-semibold",children:[' "',r==null?void 0:r.nama,'"']}),"."]})]}),a.jsxs(la,{children:[a.jsx(ta,{children:"Batal"}),a.jsx(oa,{onClick:K,className:"bg-red-600 hover:bg-red-700",children:"Ya, Hapus"})]})]})})]})}export{Ka as default};
